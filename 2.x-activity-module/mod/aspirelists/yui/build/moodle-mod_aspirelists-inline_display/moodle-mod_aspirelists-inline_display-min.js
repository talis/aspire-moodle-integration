YUI.add("moodle-mod_aspirelists-inline_display",function(e,t){M.mod_aspirelists=M.mod_aspirelists||{},NS=M.mod_aspirelists.inline_display={},NS.inline_display_delay=1e3,NS.init_view=function(t,n){e.delegate("click",this.toggle_inline_list,e.config.doc,".aspirelists_inline_readings_toggle .activityinstance a",this),e.on("domready",this.resize_embedded_lists),e.on("domready",this.load_queued_iframes),this.accordionOpen=t,this.accordionClosed=n,this.iframeQueue=[]},NS.toggleAccordionIndicator=function(e,t){e.ancestor(".aspirelists").all("span.aspirelists_inline_accordion").each(function(e){e.setHTML(t)})},NS.toggle_inline_list=function(e){e.preventDefault();var t=e.target.ancestor(".aspirelists");t&&t.all(".aspirelists_inline_list").each(function(e){e.getStyle("display")==="none"?(e.show(),NS.toggleAccordionIndicator(e,NS.accordionOpen)):(e.hide(),NS.toggleAccordionIndicator(e,NS.accordionClosed))})},NS.resize_embedded_lists=function(t){e.all(".aspirelists_inline_list").each(function(e){var t=e.ancestor(".aspirelists").get("offsetWidth"),n=e.ancestor(".aspirelists").getComputedStyle("margin"),r=e.ancestor(".aspirelists").getComputedStyle("padding-left");n&&(t-=parseFloat(n,10)*2),r&&(t-=parseFloat(r,10)*2);var i=e.ancestor(".mod-indent-outer");if(i){var s=i.getComputedStyle("padding-left"),o=e.getComputedStyle("margin-left");o&&(t-=parseFloat(o,10)*2),s&&(t-=parseFloat(s,10)*2)}e.setAttribute("width",t)})},NS.add_to_iframe_load_queue=function(e,t){this.iframeQueue.push({src:e,element:t})},NS.populateIFrame=function(e){var t=e.src,n=e.element;n.setAttribute("src",t)},NS.processNextInQueue=function(){console.log("Calling");var e=this.iframeQueue.shift();if(e===undefined)return;NS.populateIFrame(e),window.setTimeout(function(){NS.processNextInQueue()},NS.inline_display_delay)},NS.load_queued_iframes=function(t){e.all(".aspirelists_inline_list").each(function(e){var t=e.getData("intended-src");NS.add_to_iframe_load_queue(t,e)}),NS.processNextInQueue()}},"@VERSION@",{requires:["base","node","event","event-delegate"]});
